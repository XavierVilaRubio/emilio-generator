{"version":3,"sources":["webpack:///./src/app/views/import-export/import-export-routing.module.ts","webpack:///./src/app/views/import-export/import-export.module.ts","webpack:///./src/app/views/import-export/import-export/import-export.component.html","webpack:///./src/app/views/import-export/import-export/import-export.component.scss","webpack:///./src/app/views/import-export/import-export/import-export.component.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAAyC;AACc;AACyB;AAEhF,IAAM,MAAM,GAAW;IACrB;QACE,IAAI,EAAE,EAAE;QACR,SAAS,EAAE,4FAAqB;KACjC;CACF,CAAC;AAMF;IAAA;IAAyC,CAAC;IAA7B,yBAAyB;QAJrC,8DAAQ,CAAC;YACR,OAAO,EAAE,CAAC,4DAAY,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;YACxC,OAAO,EAAE,CAAC,4DAAY,CAAC;SACxB,CAAC;OACW,yBAAyB,CAAI;IAAD,gCAAC;CAAA;AAAJ;;;;;;;;;;;;;;;;;;;;;;ACfG;AACM;AACiC;AACL;AAC9B;AAU7C;IAAA;IAAkC,CAAC;IAAtB,kBAAkB;QAR9B,8DAAQ,CAAC;YACR,YAAY,EAAE,CAAC,4FAAqB,CAAC;YACrC,OAAO,EAAE;gBACP,4DAAY;gBACZ,uFAAyB;gBACzB,0DAAW;aACZ;SACF,CAAC;OACW,kBAAkB,CAAI;IAAD,yBAAC;CAAA;AAAJ;;;;;;;;;;;;ACd/B,45DAA45D,oBAAoB,y0DAAy0D,uCAAuC,GAAG,4BAA4B,29B;;;;;;;;;;;ACA/zH,8CAA8C,8BAA8B,gBAAgB,iBAAiB,EAAE,oBAAoB,iBAAiB,EAAE,kBAAkB,iCAAiC,kCAAkC,EAAE,SAAS,wBAAwB,EAAE,+CAA+C,u/B;;;;;;;;;;;;;;;;;;;ACA7Q;AACF;AAEkB;AAOlE;IAgBE,+BAAmB,OAAgB,EAAU,KAAmB;QAA7C,YAAO,GAAP,OAAO,CAAS;QAAU,UAAK,GAAL,KAAK,CAAc;QAdzD,eAAU,GAAG,MAAM,CAAC,IAAI,CAAC;QAGzB,eAAU,GAAG,GAAG,CAAC;QACjB,0BAAqB,GAAG,CAAC,CAAC;QAC1B,mBAAc,GAAG,EAAE,CAAC;QAIpB,mBAAc,GAAG,EAAE,CAAC;QACpB,mBAAc,GAAG,EAAE,CAAC;QACpB,qBAAgB,GAAG,EAAE,CAAC;QACtB,sBAAiB,GAAG,EAAE,CAAC;IAEsC,CAAC;IAErE,wCAAQ,GAAR;QACE,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC;IAC5C,CAAC;IAED,4CAAY,GAAZ;QACE,IAAI,CAAC,qBAAqB,EAAE,CAAC;QAC7B,IAAM,OAAO,GAAG,IAAI,CAAC,qBAAqB,CAAC;QAC3C,IAAM,GAAG,GAAG,GAAG,GAAG,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,GAAG,GAAG,GAAG,CAAC;QACpE,IAAM,QAAQ,GAAI,IAAI,CAAC,cAAc,GAAG,KAAK,GAAG,OAAO,GAAG,IAAI,GAAG,GAAG,GAAG,mBAAmB,CAAC;QAE3F,IAAI,CAAC,KAAK,CAAC,qBAAqB,CAAC,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,IAAI,CAAC,UAAU,CAAC,EAAE,QAAQ,EAAE,0BAA0B,CAAC,CAAC;IAClH,CAAC;IAED,kDAAkB,GAAlB,UAAmB,KAAU;QAC3B,IAAI,CAAC,iBAAiB,GAAG,EAAE,CAAC;QAC5B,IAAI,KAAK,CAAC,MAAM,CAAC,KAAK,IAAI,KAAK,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE;YAC/C,IAAI,MAAM,SAAK,CAAC;YAChB,MAAM,GAAG,IAAI,UAAU,EAAE,CAAC;YAE1B,IAAM,EAAE,GAAG,KAAK,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,IAAI,GAAG,IAAI,GAAG,IAAI,CAAC;YACpD,IAAM,eAAa,GAAG,KAAK,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,mBAAmB,CAAC,CAAC;YAC5E,IAAM,KAAK,GAAG,CAAC,CAAC;YAChB,IAAM,MAAI,GAAG,KAAK,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,IAAI,GAAG,CAAC,CAAC;YAE5C,IAAI,CAAC,cAAc,GAAG,KAAK,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;YAEjD,IAAM,IAAI,GAAG,KAAK,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,KAAK,EAAE,MAAI,GAAG,CAAC,CAAC,CAAC;YAC1D,MAAM,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;YAExB,IAAM,MAAI,GAAG,IAAI,CAAC;YAElB,MAAM,CAAC,SAAS,GAAG,UAAU,YAAiB;gBAC5C,IAAI,eAAa,IAAI,YAAY,CAAC,MAAM,CAAC,UAAU,KAAK,UAAU,CAAC,IAAI,EAAE;oBACvE,IAAM,UAAU,GAAG,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;oBAE1D,IAAI,UAAU,CAAC,cAAc,CAAC,KAAK,CAAC,EAAE;wBACpC,IAAM,MAAM,GAAG,MAAI,CAAC,OAAO,CAAC,cAAc,CAAC,UAAU,CAAC,GAAG,CAAC,CAAC;wBAC3D,MAAI,CAAC,OAAO,CAAC,SAAS,CAAC,MAAM,CAAC,GAAG,UAAU,CAAC;wBAC5C,MAAI,CAAC,gBAAgB,GAAG,6BAA6B,CAAC;wBACtD,MAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,mBAAmB,GAAG,UAAU,CAAC,IAAI,GAAG,GAAG,CAAC,CAAC;wBACzE,MAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,2BAA2B,CAAC,CAAC;wBACzD,MAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,qBAAqB,GAAG,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,SAAS,CAAC,GAAG,GAAG,CAAC,CAAC;qBACrG;yBAAM;wBACL,IAAM,gBAAgB,GAAG,MAAI,CAAC,cAAc,CAAC,KAAK,CAAC,gBAAgB,CAAC,CAAC;wBAErE,IAAI,gBAAgB,EAAE;4BACpB,IAAM,OAAO,GAAG,gBAAgB,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,GAAG,EAAE,EAAE,CAAC,CAAC,OAAO,CAAC,GAAG,EAAE,EAAE,CAAC,CAAC,WAAW,EAAE,CAAC;4BACpF,IAAM,YAAY,GAAG,MAAI,CAAC,OAAO,CAAC,cAAc,CAAC,OAAO,CAAC,CAAC;4BAC1D,MAAI,CAAC,YAAY,CAAC,YAAY,EAAE,OAAO,EAAE,UAAU,CAAC,CAAC;yBACtD;qBACF;oBACD,MAAI,CAAC,cAAc,GAAG,EAAE,CAAC;iBAC1B;qBAAM;oBACL,MAAI,CAAC,cAAc,GAAG,+BAA+B,CAAC;iBACvD;YACH,CAAC,CAAC;SACH;IACH,CAAC;IAED,4CAAY,GAAZ,UAAa,EAAU,EAAE,OAAe,EAAE,GAAQ;QAEhD,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,mBAAmB,GAAG,OAAO,GAAG,GAAG,CAAC,CAAC;QACjE,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,2BAA2B,CAAC,CAAC;QAEzD,IAAM,cAAc,GAAG,EAAE,CAAC;QAE1B,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,EAAE,CAAC,CAAC,MAAM,CAAC,MAAM,CAAC,IAAI,GAAG,GAAG,CAAC,MAAM,CAAC;QAC3D,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,EAAE,CAAC,CAAC,MAAM,CAAC,MAAM,CAAC,IAAI,GAAG,GAAG,CAAC,MAAM,CAAC;QAE3D,KAAK,IAAM,OAAO,IAAI,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,EAAE,CAAC,CAAC,MAAM,CAAC,SAAS,EAAE;YACjE,IAAI,GAAG,CAAC,KAAK,CAAC,cAAc,CAAC,OAAO,CAAC,EAAE;gBACrC,cAAc,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;gBAC7B,IAAM,aAAa,GAAG,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,EAAE,CAAC,CAAC,MAAM,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC;gBAE3E,0BAA0B;gBAC1B,aAAa,CAAC,OAAO,GAAG,GAAG,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,OAAO,CAAC;gBACnD,aAAa,CAAC,IAAI,GAAG,GAAG,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC;gBAE7C,uBAAuB;gBACvB,IAAI,GAAG,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,cAAc,CAAC,QAAQ,CAAC,EAAE;oBAC/C,IAAI,CAAC,aAAa,CAAC,cAAc,CAAC,QAAQ,CAAC,EAAE;wBAC3C,aAAa,CAAC,MAAM,GAAG,EAAE,IAAI,EAAE,GAAG,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,MAAM,EAAE,CAAC;qBAC5D;yBAAM;wBACL,aAAa,CAAC,MAAM,CAAC,IAAI,GAAG,GAAG,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,MAAM,CAAC;qBACvD;iBACF;qBAAM;oBACL,IAAI,CAAC,OAAO,CAAC,eAAe,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;iBAChD;gBAED,uBAAuB;gBACvB,IAAI,GAAG,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,cAAc,CAAC,QAAQ,CAAC,EAAE;oBAC/C,IAAI,CAAC,aAAa,CAAC,cAAc,CAAC,QAAQ,CAAC,EAAE;wBAC3C,aAAa,CAAC,MAAM,GAAG,EAAE,IAAI,EAAE,GAAG,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,MAAM,EAAE,CAAC;qBAC5D;yBAAM;wBACL,aAAa,CAAC,MAAM,CAAC,IAAI,GAAG,GAAG,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,MAAM,CAAC;qBACvD;iBACF;qBAAM;oBACL,IAAI,CAAC,OAAO,CAAC,eAAe,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;iBAChD;gBAED,eAAe;gBACf,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,EAAE,CAAC,CAAC,MAAM,CAAC,SAAS,CAAC,OAAO,CAAC,GAAG,aAAa,CAAC;aACtE;SACF;QACD,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,qBAAqB,GAAG,cAAc,CAAC,QAAQ,EAAE,GAAG,GAAG,CAAC,CAAC;QACrF,IAAI,CAAC,gBAAgB,GAAG,6BAA6B,CAAC;QACtD,IAAI,CAAC,OAAO,CAAC,QAAQ,EAAE,CAAC;IAC1B,CAAC;IA7HU,qBAAqB;QALjC,+DAAS,CAAC;YACT,QAAQ,EAAE,kBAAkB;YAC5B,+IAA6C;;SAE9C,CAAC;+EAiB4B,6DAAO,EAAiB,+EAAY;OAhBrD,qBAAqB,CA+HjC;IAAD,4BAAC;CAAA;AA/HiC","file":"views-import-export-import-export-module.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\nimport { ImportExportComponent } from './import-export/import-export.component';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: ImportExportComponent\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class ImportExportRoutingModule { }\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { ImportExportComponent } from './import-export/import-export.component';\r\nimport { ImportExportRoutingModule } from './import-export-routing.module';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\n@NgModule({\r\n  declarations: [ImportExportComponent],\r\n  imports: [\r\n    CommonModule,\r\n    ImportExportRoutingModule,\r\n    FormsModule\r\n  ]\r\n})\r\nexport class ImportExportModule { }\r\n","module.exports = \"<div class=\\\"view view-instructions\\\">\\r\\n  <div class=\\\"row\\\">\\r\\n    <div class=\\\"col\\\">\\r\\n      <div class=\\\"card\\\">\\r\\n        <div class=\\\"card-header\\\">\\r\\n          Import\\r\\n        </div>\\r\\n        <div class=\\\"card-body\\\">\\r\\n          <div class=\\\"row\\\">\\r\\n            <div class=\\\"col col-auto\\\">\\r\\n              <svg class=\\\"icon icon-import\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 512 512\\\"><path d=\\\"M296 384h-80c-13.3 0-24-10.7-24-24V192h-87.7c-17.8 0-26.7-21.5-14.1-34.1L242.3 5.7c7.5-7.5 19.8-7.5 27.3 0l152.2 152.2c12.6 12.6 3.7 34.1-14.1 34.1H320v168c0 13.3-10.7 24-24 24zm216-8v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h136v8c0 30.9 25.1 56 56 56h80c30.9 0 56-25.1 56-56v-8h136c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z\\\"></path></svg>\\r\\n            </div>\\r\\n            <div class=\\\"col col-no-auto\\\">\\r\\n              <div class=\\\"form-group\\\">\\r\\n                <label for=\\\"importInputFile\\\">Local file image</label>\\r\\n                <div class=\\\"input-group\\\">\\r\\n                  <div class=\\\"custom-file\\\">\\r\\n                    <input type=\\\"file\\\" class=\\\"custom-file-input\\\" id=\\\"importInputFile\\\" aria-describedby=\\\"importInputFileSubmit\\\" (change)=\\\"onSelectImportFile($event)\\\">\\r\\n                    <label class=\\\"custom-file-label\\\" for=\\\"importInputFile\\\" [innerHTML]=\\\"importFileName.length ? importFileName : 'Choose file'\\\"></label>\\r\\n                  </div>\\r\\n                </div>\\r\\n                <small class=\\\"form-text text-danger\\\" [hidden]=\\\"!importErrorMsg.length\\\" [innerHTML]=\\\"importErrorMsg.length ? importErrorMsg : ''\\\"></small>\\r\\n              </div>\\r\\n\\r\\n              <div class=\\\"alert alert-success mb-3\\\" role=\\\"alert\\\" [hidden]=\\\"!importSuccessMsg.length\\\">\\r\\n                <strong>Success!</strong> {{ importSuccessMsg }}\\r\\n              </div>\\r\\n\\r\\n              <ul [hidden]=\\\"!importSuccessData.length\\\" class=\\\"pl-3\\\">\\r\\n                <li *ngFor=\\\"let importItemData of importSuccessData\\\">\\r\\n                  <pre class=\\\"mb-0\\\" [innerHTML]=\\\"importItemData\\\"></pre>\\r\\n                </li>\\r\\n              </ul>\\r\\n            </div>\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n\\r\\n    <div class=\\\"col\\\">\\r\\n      <div class=\\\"card\\\">\\r\\n        <div class=\\\"card-header\\\">\\r\\n          Export\\r\\n        </div>\\r\\n        <div class=\\\"card-body\\\">\\r\\n            <div class=\\\"row\\\">\\r\\n              <div class=\\\"col col-auto\\\">\\r\\n                <svg class=\\\"icon icon-export\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 512 512\\\"><path d=\\\"M216 0h80c13.3 0 24 10.7 24 24v168h87.7c17.8 0 26.7 21.5 14.1 34.1L269.7 378.3c-7.5 7.5-19.8 7.5-27.3 0L90.1 226.1c-12.6-12.6-3.7-34.1 14.1-34.1H192V24c0-13.3 10.7-24 24-24zm296 376v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h146.7l49 49c20.1 20.1 52.5 20.1 72.6 0l49-49H488c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z\\\"></path></svg>\\r\\n              </div>\\r\\n              <div class=\\\"col col-no-auto\\\">\\r\\n                <div class=\\\"form-group\\\">\\r\\n                  <label for=\\\"exportDestLang\\\">Select export language</label>\\r\\n                  <select\\r\\n                    id=\\\"exportDestLang\\\"\\r\\n                    class=\\\"form-control\\\"\\r\\n                    name=\\\"exportDestLang\\\"\\r\\n                    aria-describedby=\\\"exportDestLangHelp\\\"\\r\\n                    [(ngModel)]=\\\"exportLang\\\"\\r\\n                  >\\r\\n                    <option *ngFor=\\\"let langId of objectKeys(selectLangs)\\\" [value]=\\\"langId\\\">\\r\\n                      {{ selectLangs[langId].key | uppercase }} {{ selectLangs[langId].name }}\\r\\n                    </option>\\r\\n                  </select>\\r\\n                </div>\\r\\n\\r\\n                <div class=\\\"form-group\\\">\\r\\n                  <label for=\\\"exportFilename\\\">Filename</label>\\r\\n                  <div class=\\\"input-group\\\">\\r\\n                    <input [(ngModel)]=\\\"exportFileName\\\" type=\\\"text\\\" id=\\\"exportFilename\\\" name=\\\"exportFilename\\\" class=\\\"form-control\\\" placeholder=\\\"Export file name\\\" aria-label=\\\"Export file name\\\" aria-describedby=\\\"export-button\\\">\\r\\n                    <div class=\\\"input-group-append\\\">\\r\\n                      <span class=\\\"input-group-text\\\">.emilio-generator</span>\\r\\n                      <button class=\\\"btn btn-primary\\\" (click)=\\\"exportAction()\\\" type=\\\"button\\\" id=\\\"export-button\\\">Export</button>\\r\\n                    </div>\\r\\n                  </div>\\r\\n                </div>\\r\\n              </div>\\r\\n            </div>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n\"","module.exports = \".icon-import, .icon-export {\\n  fill: url(#gradient-pink);\\n  width: 80px;\\n  height: 80px; }\\n\\n#export-button {\\n  width: 120px; }\\n\\n.col-no-auto {\\n  flex: 0 0 calc(100% - 110px);\\n  max-width: calc(100% - 110px); }\\n\\npre {\\n  white-space: normal; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvdmlld3MvaW1wb3J0LWV4cG9ydC9pbXBvcnQtZXhwb3J0L0M6XFxVc2Vyc1xcam9lbC50b3JuZXJcXERvY3VtZW50c1xcR2l0aHViXFxlbWlsaW8tZ2VuZXJhdG9yL3NyY1xcYXBwXFx2aWV3c1xcaW1wb3J0LWV4cG9ydFxcaW1wb3J0LWV4cG9ydFxcaW1wb3J0LWV4cG9ydC5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLHlCQUF5QjtFQUN6QixXQUFXO0VBQ1gsWUFBWSxFQUFBOztBQUdkO0VBQ0UsWUFBWSxFQUFBOztBQUdkO0VBQ0UsNEJBQTRCO0VBQzVCLDZCQUE2QixFQUFBOztBQUcvQjtFQUNFLG1CQUFtQixFQUFBIiwiZmlsZSI6InNyYy9hcHAvdmlld3MvaW1wb3J0LWV4cG9ydC9pbXBvcnQtZXhwb3J0L2ltcG9ydC1leHBvcnQuY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIuaWNvbi1pbXBvcnQsIC5pY29uLWV4cG9ydCB7XHJcbiAgZmlsbDogdXJsKCNncmFkaWVudC1waW5rKTtcclxuICB3aWR0aDogODBweDtcclxuICBoZWlnaHQ6IDgwcHg7XHJcbn1cclxuXHJcbiNleHBvcnQtYnV0dG9uIHtcclxuICB3aWR0aDogMTIwcHg7XHJcbn1cclxuXHJcbi5jb2wtbm8tYXV0byB7XHJcbiAgZmxleDogMCAwIGNhbGMoMTAwJSAtIDExMHB4KTtcclxuICBtYXgtd2lkdGg6IGNhbGMoMTAwJSAtIDExMHB4KTtcclxufVxyXG5cclxucHJlIHtcclxuICB3aGl0ZS1zcGFjZTogbm9ybWFsO1xyXG59XHJcbiJdfQ== */\"","import { Component, OnInit } from '@angular/core';\r\nimport { AppData } from 'src/app/data/app-data';\r\nimport * as moment from 'moment';\r\nimport { JszipService } from 'src/app/lib/services/jszip.service';\r\n\r\n@Component({\r\n  selector: 'eg-import-export',\r\n  templateUrl: './import-export.component.html',\r\n  styleUrls: ['./import-export.component.scss']\r\n})\r\nexport class ImportExportComponent implements OnInit {\r\n\r\n  public objectKeys = Object.keys;\r\n  public selectLangs: any;\r\n\r\n  public exportLang = '1';\r\n  public exportFileNameVersion = 0;\r\n  public exportFileName = '';\r\n\r\n  public importSrc: any;\r\n  public importSrcBase64: string;\r\n  public importFileName = '';\r\n  public importErrorMsg = '';\r\n  public importSuccessMsg = '';\r\n  public importSuccessData = [];\r\n\r\n  constructor(public appData: AppData, private jszip: JszipService) { }\r\n\r\n  ngOnInit() {\r\n    this.selectLangs = this.appData.languages;\r\n  }\r\n\r\n  exportAction() {\r\n    this.exportFileNameVersion++;\r\n    const version = this.exportFileNameVersion;\r\n    const key = '[' + this.appData.languages[this.exportLang].key + ']';\r\n    const fileName =  this.exportFileName + '__v' + version + '__' + key + '.emilio-generator';\r\n\r\n    this.jszip.saveAsEmilioGenerator(this.appData.languages[this.exportLang], fileName, 'text/plain;charset=utf-8');\r\n  }\r\n\r\n  onSelectImportFile(event: any) {\r\n    this.importSuccessData = [];\r\n    if (event.target.files && event.target.files[0]) {\r\n      let reader: any;\r\n      reader = new FileReader();\r\n\r\n      const mb = event.target.files[0].size / 1024 / 1024;\r\n      const correctFormat = event.target.files[0].name.match('.emilio-generator');\r\n      const start = 0;\r\n      const stop = event.target.files[0].size - 1;\r\n\r\n      this.importFileName = event.target.files[0].name;\r\n\r\n      const blob = event.target.files[0].slice(start, stop + 1);\r\n      reader.readAsText(blob);\r\n\r\n      const self = this;\r\n\r\n      reader.onloadend = function (eventLoadEnd: any) {\r\n        if (correctFormat && eventLoadEnd.target.readyState === FileReader.DONE) {\r\n          const newDataObj = JSON.parse(eventLoadEnd.target.result);\r\n\r\n          if (newDataObj.hasOwnProperty('key')) {\r\n            const langId = self.appData.getLangIdByKey(newDataObj.key);\r\n            self.appData.languages[langId] = newDataObj;\r\n            self.importSuccessMsg = 'File imported successfully.';\r\n            self.importSuccessData.push('<b>Language</b> [' + newDataObj.name + ']');\r\n            self.importSuccessData.push('<b>File version</b> [2.x]');\r\n            self.importSuccessData.push('<b>Emails ids</b> [' + Object.keys(newDataObj.emails.templates) + ']');\r\n          } else {\r\n            const oldVersionLegacy = self.importFileName.match(/\\[[A-Z]{2,3}\\]/);\r\n\r\n            if (oldVersionLegacy) {\r\n              const langKey = oldVersionLegacy[0].replace('[', '').replace(']', '').toLowerCase();\r\n              const langIdLegacy = self.appData.getLangIdByKey(langKey);\r\n              self.legacyImport(langIdLegacy, langKey, newDataObj);\r\n            }\r\n          }\r\n          self.importErrorMsg = '';\r\n        } else {\r\n          self.importErrorMsg = 'Only .emilio-generator files!';\r\n        }\r\n      };\r\n    }\r\n  }\r\n\r\n  legacyImport(id: number, langKey: string, obj: any) {\r\n\r\n    this.importSuccessData.push('<b>Language</b> [' + langKey + ']');\r\n    this.importSuccessData.push('<b>File version</b> [1.x]');\r\n\r\n    const successEmailId = [];\r\n\r\n    this.appData.languages[id].emails.header.html = obj.header;\r\n    this.appData.languages[id].emails.footer.html = obj.footer;\r\n\r\n    for (const emailId in this.appData.languages[id].emails.templates) {\r\n      if (obj.mails.hasOwnProperty(emailId)) {\r\n        successEmailId.push(emailId);\r\n        const thisDataEmail = this.appData.languages[id].emails.templates[emailId];\r\n\r\n        // update subject and body\r\n        thisDataEmail.subject = obj.mails[emailId].subject;\r\n        thisDataEmail.html = obj.mails[emailId].html;\r\n\r\n        // update custom header\r\n        if (obj.mails[emailId].hasOwnProperty('header')) {\r\n          if (!thisDataEmail.hasOwnProperty('header')) {\r\n            thisDataEmail.header = { html: obj.mails[emailId].header };\r\n          } else {\r\n            thisDataEmail.header.html = obj.mails[emailId].header;\r\n          }\r\n        } else {\r\n          this.appData.delCustomHeader(langKey, emailId);\r\n        }\r\n\r\n        // update custom footer\r\n        if (obj.mails[emailId].hasOwnProperty('footer')) {\r\n          if (!thisDataEmail.hasOwnProperty('footer')) {\r\n            thisDataEmail.footer = { html: obj.mails[emailId].footer };\r\n          } else {\r\n            thisDataEmail.footer.html = obj.mails[emailId].footer;\r\n          }\r\n        } else {\r\n          this.appData.delCustomFooter(langKey, emailId);\r\n        }\r\n\r\n        // save changes\r\n        this.appData.languages[id].emails.templates[emailId] = thisDataEmail;\r\n      }\r\n    }\r\n    this.importSuccessData.push('<b>Emails ids</b> [' + successEmailId.toString() + ']');\r\n    this.importSuccessMsg = 'File imported successfully.';\r\n    this.appData.checkAll();\r\n  }\r\n\r\n}\r\n"],"sourceRoot":""}