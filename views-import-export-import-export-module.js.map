{"version":3,"sources":["webpack:///./src/app/views/import-export/import-export-routing.module.ts","webpack:///./src/app/views/import-export/import-export.module.ts","webpack:///./src/app/views/import-export/import-export/import-export.component.html","webpack:///./src/app/views/import-export/import-export/import-export.component.scss","webpack:///./src/app/views/import-export/import-export/import-export.component.ts"],"names":[],"mappings":"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","file":"views-import-export-import-export-module.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\nimport { ImportExportComponent } from './import-export/import-export.component';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: ImportExportComponent\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class ImportExportRoutingModule { }\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { ImportExportComponent } from './import-export/import-export.component';\r\nimport { ImportExportRoutingModule } from './import-export-routing.module';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\n@NgModule({\r\n  declarations: [ImportExportComponent],\r\n  imports: [\r\n    CommonModule,\r\n    ImportExportRoutingModule,\r\n    FormsModule\r\n  ]\r\n})\r\nexport class ImportExportModule { }\r\n","module.exports = \"<div class=\\\"view view-instructions\\\">\\r\\n  <div class=\\\"row\\\">\\r\\n    <div class=\\\"col\\\">\\r\\n      <div class=\\\"card\\\">\\r\\n        <div class=\\\"card-header\\\">Import</div>\\r\\n        <div class=\\\"card-body\\\">\\r\\n          <div class=\\\"row\\\">\\r\\n            <div class=\\\"col col-auto\\\">\\r\\n              <svg\\r\\n                class=\\\"icon icon-import\\\"\\r\\n                xmlns=\\\"http://www.w3.org/2000/svg\\\"\\r\\n                viewBox=\\\"0 0 512 512\\\"\\r\\n              >\\r\\n                <path\\r\\n                  d=\\\"M296 384h-80c-13.3 0-24-10.7-24-24V192h-87.7c-17.8 0-26.7-21.5-14.1-34.1L242.3 5.7c7.5-7.5 19.8-7.5 27.3 0l152.2 152.2c12.6 12.6 3.7 34.1-14.1 34.1H320v168c0 13.3-10.7 24-24 24zm216-8v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h136v8c0 30.9 25.1 56 56 56h80c30.9 0 56-25.1 56-56v-8h136c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z\\\"\\r\\n                ></path>\\r\\n              </svg>\\r\\n            </div>\\r\\n            <div class=\\\"col col-no-auto\\\">\\r\\n              <div class=\\\"form-group\\\">\\r\\n                <label for=\\\"importInputFile\\\">Local file image</label>\\r\\n                <div class=\\\"input-group\\\">\\r\\n                  <div class=\\\"custom-file\\\">\\r\\n                    <input\\r\\n                      type=\\\"file\\\"\\r\\n                      class=\\\"custom-file-input\\\"\\r\\n                      id=\\\"importInputFile\\\"\\r\\n                      aria-describedby=\\\"importInputFileSubmit\\\"\\r\\n                      (change)=\\\"onSelectImportFile($event)\\\"\\r\\n                    />\\r\\n                    <label\\r\\n                      class=\\\"custom-file-label\\\"\\r\\n                      for=\\\"importInputFile\\\"\\r\\n                      [innerHTML]=\\\"\\r\\n                        importFileName.length ? importFileName : 'Choose file'\\r\\n                      \\\"\\r\\n                    ></label>\\r\\n                  </div>\\r\\n                </div>\\r\\n                <small\\r\\n                  class=\\\"form-text text-danger\\\"\\r\\n                  [hidden]=\\\"!importErrorMsg.length\\\"\\r\\n                  [innerHTML]=\\\"importErrorMsg.length ? importErrorMsg : ''\\\"\\r\\n                ></small>\\r\\n              </div>\\r\\n\\r\\n              <div\\r\\n                class=\\\"alert alert-success mb-3\\\"\\r\\n                role=\\\"alert\\\"\\r\\n                [hidden]=\\\"!importSuccessMsg.length\\\"\\r\\n              >\\r\\n                <strong>Success!</strong> {{ importSuccessMsg }}\\r\\n              </div>\\r\\n\\r\\n              <ul [hidden]=\\\"!importSuccessData.length\\\" class=\\\"pl-3\\\">\\r\\n                <li *ngFor=\\\"let importItemData of importSuccessData\\\">\\r\\n                  <pre class=\\\"mb-0\\\" [innerHTML]=\\\"importItemData\\\"></pre>\\r\\n                </li>\\r\\n              </ul>\\r\\n            </div>\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n\\r\\n    <div class=\\\"col\\\">\\r\\n      <div class=\\\"card\\\">\\r\\n        <div class=\\\"card-header\\\">Export</div>\\r\\n        <div class=\\\"card-body\\\">\\r\\n          <div class=\\\"row\\\">\\r\\n            <div class=\\\"col col-auto\\\">\\r\\n              <svg\\r\\n                class=\\\"icon icon-export\\\"\\r\\n                xmlns=\\\"http://www.w3.org/2000/svg\\\"\\r\\n                viewBox=\\\"0 0 512 512\\\"\\r\\n              >\\r\\n                <path\\r\\n                  d=\\\"M216 0h80c13.3 0 24 10.7 24 24v168h87.7c17.8 0 26.7 21.5 14.1 34.1L269.7 378.3c-7.5 7.5-19.8 7.5-27.3 0L90.1 226.1c-12.6-12.6-3.7-34.1 14.1-34.1H192V24c0-13.3 10.7-24 24-24zm296 376v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h146.7l49 49c20.1 20.1 52.5 20.1 72.6 0l49-49H488c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z\\\"\\r\\n                ></path>\\r\\n              </svg>\\r\\n            </div>\\r\\n            <div class=\\\"col col-no-auto\\\">\\r\\n              <div class=\\\"form-group\\\">\\r\\n                <label for=\\\"exportDestLang\\\">Select export language</label>\\r\\n                <select\\r\\n                  id=\\\"exportDestLang\\\"\\r\\n                  class=\\\"form-control\\\"\\r\\n                  name=\\\"exportDestLang\\\"\\r\\n                  aria-describedby=\\\"exportDestLangHelp\\\"\\r\\n                  [(ngModel)]=\\\"exportLang\\\"\\r\\n                >\\r\\n                  <option\\r\\n                    *ngFor=\\\"let langId of objectKeys(appData.languages)\\\"\\r\\n                    [value]=\\\"langId\\\"\\r\\n                  >\\r\\n                    {{ appData.languages[langId].key | uppercase }}\\r\\n                    {{ appData.languages[langId].name }}\\r\\n                  </option>\\r\\n                </select>\\r\\n              </div>\\r\\n\\r\\n              <div class=\\\"form-group\\\">\\r\\n                <label for=\\\"exportFilename\\\">Filename</label>\\r\\n                <div class=\\\"input-group\\\">\\r\\n                  <input\\r\\n                    [(ngModel)]=\\\"exportFileName\\\"\\r\\n                    type=\\\"text\\\"\\r\\n                    id=\\\"exportFilename\\\"\\r\\n                    name=\\\"exportFilename\\\"\\r\\n                    class=\\\"form-control\\\"\\r\\n                    placeholder=\\\"Export file name\\\"\\r\\n                    aria-label=\\\"Export file name\\\"\\r\\n                    aria-describedby=\\\"export-button\\\"\\r\\n                  />\\r\\n                  <div class=\\\"input-group-append\\\">\\r\\n                    <span class=\\\"input-group-text\\\">.emilio-generator</span>\\r\\n                    <button\\r\\n                      class=\\\"btn btn-primary\\\"\\r\\n                      (click)=\\\"exportAction()\\\"\\r\\n                      type=\\\"button\\\"\\r\\n                      id=\\\"export-button\\\"\\r\\n                    >\\r\\n                      Export\\r\\n                    </button>\\r\\n                  </div>\\r\\n                </div>\\r\\n              </div>\\r\\n            </div>\\r\\n          </div>\\r\\n        </div>\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n\"","module.exports = \".icon-import, .icon-export {\\n  fill: url(#gradient-pink);\\n  width: 80px;\\n  height: 80px; }\\n\\n#export-button {\\n  width: 120px; }\\n\\n.col-no-auto {\\n  flex: 0 0 calc(100% - 110px);\\n  max-width: calc(100% - 110px); }\\n\\npre {\\n  white-space: normal; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvdmlld3MvaW1wb3J0LWV4cG9ydC9pbXBvcnQtZXhwb3J0L0M6XFxHaXRodWJcXGVtaWxpby1nZW5lcmF0b3Ivc3JjXFxhcHBcXHZpZXdzXFxpbXBvcnQtZXhwb3J0XFxpbXBvcnQtZXhwb3J0XFxpbXBvcnQtZXhwb3J0LmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UseUJBQXlCO0VBQ3pCLFdBQVc7RUFDWCxZQUFZLEVBQUE7O0FBR2Q7RUFDRSxZQUFZLEVBQUE7O0FBR2Q7RUFDRSw0QkFBNEI7RUFDNUIsNkJBQTZCLEVBQUE7O0FBRy9CO0VBQ0UsbUJBQW1CLEVBQUEiLCJmaWxlIjoic3JjL2FwcC92aWV3cy9pbXBvcnQtZXhwb3J0L2ltcG9ydC1leHBvcnQvaW1wb3J0LWV4cG9ydC5jb21wb25lbnQuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi5pY29uLWltcG9ydCwgLmljb24tZXhwb3J0IHtcclxuICBmaWxsOiB1cmwoI2dyYWRpZW50LXBpbmspO1xyXG4gIHdpZHRoOiA4MHB4O1xyXG4gIGhlaWdodDogODBweDtcclxufVxyXG5cclxuI2V4cG9ydC1idXR0b24ge1xyXG4gIHdpZHRoOiAxMjBweDtcclxufVxyXG5cclxuLmNvbC1uby1hdXRvIHtcclxuICBmbGV4OiAwIDAgY2FsYygxMDAlIC0gMTEwcHgpO1xyXG4gIG1heC13aWR0aDogY2FsYygxMDAlIC0gMTEwcHgpO1xyXG59XHJcblxyXG5wcmUge1xyXG4gIHdoaXRlLXNwYWNlOiBub3JtYWw7XHJcbn1cclxuIl19 */\"","import { Component, OnInit } from \"@angular/core\";\r\nimport { AppData } from \"src/app/data/app-data\";\r\nimport * as moment from \"moment\";\r\nimport { JszipService } from \"src/app/lib/services/jszip.service\";\r\nimport { BeyondService } from \"src/app/lib/services/beyond.service\";\r\n\r\n@Component({\r\n  selector: \"eg-import-export\",\r\n  templateUrl: \"./import-export.component.html\",\r\n  styleUrls: [\"./import-export.component.scss\"],\r\n})\r\nexport class ImportExportComponent implements OnInit {\r\n  public objectKeys = Object.keys;\r\n\r\n  public exportLang = \"1\";\r\n  public exportFileNameVersion = 0;\r\n  public exportFileName = \"\";\r\n\r\n  public importSrc: any;\r\n  public importSrcBase64: string;\r\n  public importFileName = \"\";\r\n  public importErrorMsg = \"\";\r\n  public importSuccessMsg = \"\";\r\n  public importSuccessData = [];\r\n\r\n  public beyondValue: boolean;\r\n\r\n  constructor(\r\n    public appData: AppData,\r\n    private jszip: JszipService,\r\n    private beyond: BeyondService\r\n  ) {}\r\n\r\n  ngOnInit() {}\r\n\r\n  exportAction() {\r\n    this.exportFileNameVersion++;\r\n    const version = this.exportFileNameVersion;\r\n    const key = \"[\" + this.appData.languages[this.exportLang].key + \"]\";\r\n    const fileName =\r\n      this.exportFileName + \"__v\" + version + \"__\" + key + \".emilio-generator\";\r\n\r\n    this.jszip.saveAsEmilioGenerator(\r\n      this.appData.languages[this.exportLang],\r\n      fileName,\r\n      \"text/plain;charset=utf-8\"\r\n    );\r\n  }\r\n\r\n  onSelectImportFile(event: any) {\r\n    this.importSuccessData = [];\r\n    if (event.target.files && event.target.files[0]) {\r\n      let reader: any;\r\n      reader = new FileReader();\r\n\r\n      // const mb = event.target.files[0].size / 1024 / 1024;\r\n      const correctFormat =\r\n        event.target.files[0].name.match(\".emilio-generator\");\r\n      const start = 0;\r\n      const stop = event.target.files[0].size - 1;\r\n\r\n      this.importFileName = event.target.files[0].name;\r\n\r\n      const blob = event.target.files[0].slice(start, stop + 1);\r\n      reader.readAsText(blob);\r\n      reader.onloadend = (eventLoadEnd: any) => {\r\n        if (\r\n          correctFormat &&\r\n          eventLoadEnd.target.readyState === FileReader.DONE\r\n        ) {\r\n          const newDataObj = JSON.parse(eventLoadEnd.target.result);\r\n\r\n          const langId = this.appData.getLangIdByKey(newDataObj.key);\r\n          const isBeyond = newDataObj.system === \"beyond\";\r\n          this.beyond.changeBeyond(isBeyond);\r\n\r\n          this.appData.languages[langId] = newDataObj;\r\n          this.importSuccessMsg = \"File imported successfully.\";\r\n          this.importSuccessData.push(\r\n            \"<b>Language</b> [\" + newDataObj.name + \"]\"\r\n          );\r\n          this.importSuccessData.push(\r\n            `<b>System</b> ${isBeyond ? \"beyond\" : \"fluid\"}`\r\n          );\r\n          this.importSuccessData.push(\"<b>File version</b> [2.x]\");\r\n          this.importSuccessData.push(\r\n            \"<b>Emails ids</b> [\" +\r\n              Object.keys(newDataObj.emails.templates) +\r\n              \"]\"\r\n          );\r\n\r\n          this.importErrorMsg = \"\";\r\n        } else {\r\n          this.importErrorMsg = \"Only .emilio-generator files!\";\r\n        }\r\n      };\r\n    }\r\n  }\r\n}\r\n"],"sourceRoot":""}